#ifndef __MOTIONCONFIG_H
#define __MOTIONCONFIG_H

#include <stdio.h>

// Families of modes
// The number is built using a bitmask: qmgal (l=low power)
#define MPU_MODE_BM_LP 1
#define MPU_MODE_BM_A 2
#define MPU_MODE_BM_G 4
#define MPU_MODE_BM_M 8
#define MPU_MODE_BM_Q 16
#define MPU_MODE_BM_E 32
#define MPU_MODE_BM_DBG 64
#define MPU_MODE_BM_QDBG 128
#define MPU_MODE_GYR 		MPU_MODE_BM_G
#define MPU_MODE_ACC 		MPU_MODE_BM_A
#define MPU_MODE_ACCGYR 	(MPU_MODE_BM_A|MPU_MODE_BM_G)
#define MPU_MODE_LPACC 		(MPU_MODE_BM_A|MPU_MODE_BM_LP)
#define MPU_MODE_ACCGYRMAG 	(MPU_MODE_BM_A|MPU_MODE_BM_G|MPU_MODE_BM_M)
#define MPU_MODE_ACCGYRMAGQ (MPU_MODE_BM_A|MPU_MODE_BM_G|MPU_MODE_BM_M|MPU_MODE_BM_Q)
#define MPU_MODE_Q 			MPU_MODE_BM_Q
#define MPU_MODE_E 			MPU_MODE_BM_E
#define MPU_MODE_QDBG		MPU_MODE_BM_QDBG


// === ICM LPODR dividers
// ODR is defined as: ODR = 1.125KHz/(1+divider)

#define ICM_LPODR_125 8		// Exact is 125
#define ICM_LPODR_10 111	// Exact is 10.04
#define ICM_LPODR_1 1124	// Exact is 1Hz

// == ICM ACC LPF
// Parameters are 3DB BW, rounded to meaningful number
#define ICM_ACC_LPF_473 7
#define ICM_ACC_LPF_246 1
#define ICM_ACC_LPF_111 2
#define ICM_ACC_LPF_50 3
#define ICM_ACC_LPF_25 4
#define ICM_ACC_LPF_10 5
#define ICM_ACC_LPF_5 6

// == ICM GYRO LPF
// Parameters are 3DB BW, rounded to meaningful number
#define ICM_GYRO_LPF_361 7
#define ICM_GYRO_LPF_196 0
#define ICM_GYRO_LPF_152 1
#define ICM_GYRO_LPF_120 2
#define ICM_GYRO_LPF_51 3
#define ICM_GYRO_LPF_25 4
#define ICM_GYRO_LPF_10 5
#define ICM_GYRO_LPF_5 6






// Name of the configurations
#define MOTIONCONFIG_NUM 41
#define MPU_MODE_OFF 								0
#define MPU_MODE_562HZ_GYRO							1
#define MPU_MODE_375HZ_GYRO							2
#define MPU_MODE_225HZ_GYRO							3
#define MPU_MODE_102HZ_GYRO							4
#define MPU_MODE_51HZ_GYRO							5
#define MPU_MODE_10HZ_GYRO							6

#define MPU_MODE_562HZ_ACC							(MPU_MODE_10HZ_GYRO+1)
#define MPU_MODE_375HZ_ACC							(MPU_MODE_10HZ_GYRO+2)
#define MPU_MODE_225HZ_ACC							(MPU_MODE_10HZ_GYRO+3)
#define MPU_MODE_102HZ_ACC							(MPU_MODE_10HZ_GYRO+4)
#define MPU_MODE_51HZ_ACC							(MPU_MODE_10HZ_GYRO+5)
#define MPU_MODE_10HZ_ACC							(MPU_MODE_10HZ_GYRO+6)

#define MPU_MODE_562HZ_ACCGYRO						(MPU_MODE_10HZ_ACC+1)
#define MPU_MODE_375HZ_ACCGYRO						(MPU_MODE_10HZ_ACC+2)
#define MPU_MODE_225HZ_ACCGYRO						(MPU_MODE_10HZ_ACC+3)
#define MPU_MODE_102HZ_ACCGYRO						(MPU_MODE_10HZ_ACC+4)
#define MPU_MODE_51HZ_ACCGYRO						(MPU_MODE_10HZ_ACC+5)
#define MPU_MODE_10HZ_ACCGYRO						(MPU_MODE_10HZ_ACC+6)

//#define MPU_MODE_125HZ_LPACC						(MPU_MODE_10HZ_ACCGYRO+1)
//#define MPU_MODE_10HZ_LPACC						(MPU_MODE_10HZ_ACCGYRO+2)
//#define MPU_MODE_1HZ_LPACC						(MPU_MODE_10HZ_ACCGYRO+3)

#define MPU_MODE_562HZ_ACCGYROMAG10					(MPU_MODE_10HZ_ACCGYRO+1)
#define MPU_MODE_375HZ_ACCGYROMAG10					(MPU_MODE_562HZ_ACCGYROMAG10+1)
#define MPU_MODE_225HZ_ACCGYROMAG10					(MPU_MODE_562HZ_ACCGYROMAG10+2)
#define MPU_MODE_102HZ_ACCGYROMAG10					(MPU_MODE_562HZ_ACCGYROMAG10+3)
#define MPU_MODE_51HZ_ACCGYROMAG10					(MPU_MODE_562HZ_ACCGYROMAG10+4)
#define MPU_MODE_10HZ_ACCGYROMAG10					(MPU_MODE_562HZ_ACCGYROMAG10+5)

#define MPU_MODE_562HZ_ACCGYROMAG100				(MPU_MODE_10HZ_ACCGYROMAG10+1)
#define MPU_MODE_375HZ_ACCGYROMAG100				(MPU_MODE_562HZ_ACCGYROMAG100+1)
#define MPU_MODE_225HZ_ACCGYROMAG100				(MPU_MODE_562HZ_ACCGYROMAG100+2)
#define MPU_MODE_102HZ_ACCGYROMAG100				(MPU_MODE_562HZ_ACCGYROMAG100+3)
#define MPU_MODE_51HZ_ACCGYROMAG100					(MPU_MODE_562HZ_ACCGYROMAG100+4)
#define MPU_MODE_10HZ_ACCGYROMAG100					(MPU_MODE_562HZ_ACCGYROMAG100+5)

#define MPU_MODE_562HZ_ACCGYROMAG100QUAT			(MPU_MODE_10HZ_ACCGYROMAG100+1)
#define MPU_MODE_375HZ_ACCGYROMAG100QUAT			(MPU_MODE_562HZ_ACCGYROMAG100QUAT+1)
#define MPU_MODE_225HZ_ACCGYROMAG100QUAT			(MPU_MODE_562HZ_ACCGYROMAG100QUAT+2)
#define MPU_MODE_102HZ_ACCGYROMAG100QUAT			(MPU_MODE_562HZ_ACCGYROMAG100QUAT+3)


//#define MPU_MODE_500HZ_ACC_BW92_GYRO_BW92_MAG_8_Q	39
//#define MPU_MODE_200HZ_ACC_BW92_GYRO_BW92_MAG_8_Q	40
//#define MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_8_Q	41

/*#define MPU_MODE_500HZ_ACC_BW92_GYRO_BW92_MAG_100_Q	(MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100+1)
#define MPU_MODE_200HZ_ACC_BW92_GYRO_BW92_MAG_100_Q	(MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100+2)
#define MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100_Q	(MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100+3)

#define MPU_MODE_500HZ_Q							(MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100_Q+1)
#define MPU_MODE_200HZ_Q							(MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100_Q+2)
#define MPU_MODE_100HZ_Q							(MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100_Q+3)

#define MPU_MODE_100HZ_E							(MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100_Q+4)
#define MPU_MODE_100HZ_QDBG							(MPU_MODE_100HZ_ACC_BW41_GYRO_BW41_MAG_100_Q+5)*/


extern const char *mc_options[];
void mpu_config_motionmode(unsigned char sensorsr,unsigned char autoread);
unsigned char mpu_get_motionmode(unsigned char *autoread);
void mpu_getmodename(unsigned char motionmode,char *buffer);
void mpu_printmotionmode(FILE *file);


#endif
